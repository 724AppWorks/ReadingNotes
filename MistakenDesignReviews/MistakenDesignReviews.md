
# はじめに
年次をまたぐに連れて、設計をする側だけでなく、レビュータスクも増えてきました。
しかし、自分が担当していないので、レビューに多くの時間がかかるうえ、見つけるのはtypoだけ。。。
なんてことが多いので、設計レビューのノウハウを学ぶために読んだ書籍から、Tipsを抜き出そうと思います。

# 第1章 レビューの間違い
## よくある間違ったレビュー
 - 誤字脱字や、ドキュメントの体裁など、「思い付き」の指摘
 - 指摘件数にノルマを課す
 - 設計者を責める
## レビューの目的は修正工数を減らすこと
 - 要件定義や設計段階での潜在的な問題を検出することが目的
 - 誤字脱字に対する指摘は、設計レビュー以降の段階でも修正工数に大差ない
 - 「重大な問題を取り除いた設計書」を作成することが設計レビューの主目的。完璧を目指してレビュー時間が跳ね上がるのは無駄
 - 無駄な指摘や、設計者を責めるようなレビューは、設計者のモチベを下げ、生産性に影響することを把握する

## 問題検出と問題指摘
 - 問題を検出する方法だけでなく、検出した問題を指摘する方法も同様に重要
 - 例えば「設計者を責める」ような問題指摘を行えば、設計者のモチベを下げたり、衝突を生んだりする

## 個人レビューのアンチパターン
### 人間関係の持ち込み
例として、不仲なエンジニアに対してイジワルな指摘をするなど。
対策としては、レビューの目的を明確に持ち、その方針から外れないこと。
目的は、重大な問題がないかや、ここで指摘をすることで、工数の低減に繋がるかなどがいいかなと思います。
### 作成者気分
例として、「ミスばかり目に付くな。。。全部指摘するより自分が作り直した方が早いわい」みたいな。
作り直しをメインにしてしまうと、問題検出が疎かになりがちです。（自分の作ったものってミス気づきにくいよね）
それに、自分で作ったら誰がレビューすんの　っていうお話も。
対策としては、レビューアは指摘の中でも、重大な問題をバシっと指摘に挙げるカッコよさを目指すべきです。
そして、本当に作り直しが必要であれば、設計者にその旨を指摘として伝えるか、打合せを設けるべきです。
### 二兎追い
レビューには色々な観点があります。すべての観点をもって一度にレビューを行うことは難しいです。
対策はその逆で、観点ごとにレビューを周回的に行うことです。
意外と観点ごとでまとめられた指摘の方が見やすかったり？時系列の方が見やすかったり？まあここは好みで。
### 時間切れ
レビュータスクというものは、あまり多くの時間をかけることができません。(主担当のタスクの合間にということもあるので)
そのため、時間が取れずにレビューが中途半端になってしまうこともあります。
対策は、観点、確認箇所、時間などから勘案して、
何にどのくらいまで時間をかける必要があるか、時間をかけられるかを見積もっておくことです。

## レビュー会議における段取りと仕切り
レビュー会議における、準備、進行、完了の3段階でのアンチパターン
### 無計画な耐久レース(準備)
レビュー会議は、予定の取りやすさから夕方以降に行われがちですが、
この夕方という時間帯は、メンバーの集中力が低くなっている時間帯でもあります。（朝から仕事してますので）
そうすると、レビューがグダグダと長引いてしまう上に、それが習慣化すると、レビュー会議に向かうモチベも低下します。
対策としては、レビューは日中に行うことが望ましく、
時間も最大で2時間程度に抑えるようにすると、メリハリがつくのではないでしょうか。
### ケンカ・脱線の放置(進行)
設計者、レビューアはそれぞれ別の人間なので、思想が異なることがあるのは当然で、対立が生まれることがあります。
レビュー会議で意見の言い合いが発生すると、レビューは当然長引きます。話が脱線しちゃうことも。
対策としては、言い合いが激しくなりそうだと判断したら止めること、お互いの意見を1つずつ聞いて、
落としどころを探すこと。
レビュー会議前に指摘をリスト化できていれば、その話をすることを目的に臨むことで、脱線の予防に繋がります。
また、レビュー会議への参加者を絞り込むことはとても重要です。
関係ない会議に出席させられた人は、工数がもったいないですし、脱線した話をしてしまうかも（頑張ってくれてる）
### 唐突な終了宣言(完了)
レビュー時間の超過や、指摘目的数を達成した場合にレビューを切り上げてしまうのはNGです。
指摘された問題に対して、関連する問題がないかをチェックしましょう。
また、指摘は上げるだけではなく、対応方針を決めたうえで、作業内容も決めるようにしましょう。

## レビューマインドのアンチパターン
### 見栄の張り合い
レビューアー同士で、「あの人が指摘挙げたから、自分も挙げなきゃ」みたいなよくわからない対抗意識を持つこと。
実際に重大な問題検出ができればいいですが、そういう時あがる指摘って大抵重箱の隅つつくようなやつですよね。
対策としては目的を忘れないこと。「重大な問題の検出」が済んでいれば無理に指摘をする必要なんてないんです。
技術自慢を長々としちゃうのも控えましょう。あとでドキュメント連携するねーとかにしましょう。
### 人格攻撃
「基本ができていない」とか、指摘と関係ないことを述べちゃうのはあまりよくないです。
発言を受けた人はモチベ下がっちゃいますし、会議であれば雰囲気悪いです。
そんなことを言ってる間に、次の指摘をびしっとする方が生産的です。
### 意図的な見逃し
様々な理由から指摘を意図的に見逃すことがあります。
 - レビュー時間がなくなってきたから足早に進めるため
 - 結果的に、設計者じゃなくて自分がやらされそうだからいいわ
 - 技術力のある方が書いてるから、省略してあるだけだわきっと

最後のやつ、難易度の高いレビューだとそうかも？と思った経験あります。。。
対策としてはもちろん、見逃さず指摘しましょう。品質を高める努力をするのです。

# 第2章 準備と問題検出
レビューにおける誤った考え方
 - レビュースキルは開発経験を積んだうえで、経験で養っていくもの
 - レビューで問題を見逃してしまうのは、レビューアのミス

このように、誤った考え方を持ったままだと、不具合が起こった際に「レビューを徹底」のような
よくわからん再発防止策を立てがち。
正しいレビュー手順を把握し、改善していく。

## レビュー技法
レビュー技法は大きく分けて2種類あります。
1つは「テクニカルレビュー」。技術リーダが主導するレビュー。一般的なレビューはこちら。  
もう1つは「ウォークスルー」。設計者が主導するレビュー。テクニカルレビューよりカジュアル。

## レビューのステップ
レビューには4つのステップがあります。
「準備」「問題検出」、「問題指摘」、「修正・フォロー」です。
これは、要件定義、基本設計、詳細設計といった工程ごとに1回ずつ実施します。
レビューを主導するリーダーと、設計者で行うべきことが異なります。
※簡略化した手順を実施することも。
### リーダーの準備
リーダーが行うべき準備は以下です。
 - 検出すべき問題種別の選定
 - 指針となるシナリオの作成
 - 簡易なレビューの実施検討
 - レビューアの選定と割り当て
 - ドキュメント配布と告知

#### 検出すべき問題種別の選定
レビューを行う前準備として、レビューで検出すべき問題を定義する必要があります。
ECサイトなどであれば、スループットの低下を検出するようなイメージです。
検出すべき問題を見つけるには、トップダウンとボトムアップでアプローチします。
ボトムアップでは、既存システムや、以前の指摘などを参考に、陥りがちな問題があるかを確認します。
ポイント：以前の指摘を整理しておかなければ、過去のたくさんの指摘なんて洗ってられないぞ。
また、設計者の間違いやすい「クセ」なんかもわかってくれば、こっそり観点に含めてあげるのも優しさですね。
トップダウンでは、システムが持つべき本来の「価値」に従い、検出しなくてはならない問題を定義します。
トップダウン、ボトムアップ合わせて、問題種別は15個までくらいにしましょう。
あんまり多いと観点がぼやけ、かえって品質低下につながります。

#### 指針となるシナリオの作成
問題種別を検出するために、ドキュメントのどこをどのように調べるのかを具体的に記述したシナリオを準備します。
毎回っていうものではなさそうですね。普通は都度作ってるヒマないと思います。
ただ、選定した問題に対して、どこを重点的にチェックするかは明確である必要があり、
何をもってチェックするのか、たとえばインターフェース定義書などと照らし合わせるとかは、見えてくると思います。
無作為にチェックするより、メリハリもつくので、こちらの方が効率的だと思います。

#### 簡易なレビューの実施検討
複数のメンバが同時に作業を行う場合、似たような指摘がメンバ毎に上がってしまうことはよくあると思います。
早いうちに簡易レビューみたいなチェックポイントを設けることで、互いの認識合わせができ、方針のブレが少なくなります。
このレビューは、ウォークスルーのような自由度の高いレビューでよいと思います。
1つ注意。簡易レビューしたからそこはもう見なくていいよねみたいなのはNGです。
成果物レビューは成果物レビュー。別物だと心得ましょう。

#### レビューアの選定と割り当て
候補者のピックアップも大事な仕事です。必要なメンバ5人程度に絞りましょう。
それぞれのメンバに、指針となるシナリオを割り当てることで、多方面から似たような別文言の指摘が飛び交うようなことを封じ、
問題検出漏れの予防にも繋がります。

#### ドキュメント配布と告知
ドキュメントの配布には、構成管理システムを利用するとよいです。通知飛ぶので。締め切り過ぎたかどうかも分かるので。

### ドキュメント作成者の準備
まずはしっかりとしたドキュメントを作ろう。

#### ドキュメント作成中の疑問はすぐ相談
簡易レビューでもOK。1回30分でも効果はあるので、認識ズレが大きくなる前に、疑問があるなら解消しましょう。

#### 「問題があればレビューアが指摘してくれる」と考えない
ドキュメントの品質が低いと、レビューによる品質の上昇も少なくなる。
レビューアが優秀だからといって中途半端でいいや　という話には絶対ならない。

#### レビューアに配慮し負担を減らす
誤字脱字のチェックはもちろん、ドキュメントの構成をキレイにすることで、
レビューアのドキュメントチェックをスムーズにし、発見すべき問題検出の手助けをします。
単語の表現なんかにも気を配れるとなおよし。

#### 誤字脱字はレビューアのモチベを下げる
あんまり多いとため息もれちゃう。ってのはまああれだけど、気になって集中が途切れてしまうので要チェック。

### レビューアの準備
レビューアの準備は、「シナリオの順番決め」、「シナリオの確認と参照情報の整理」、「検出方法と箇所の検討」
、「実施タイミングの決定」の4つのプロセスから成る。

#### シナリオの順番決め
作成されたシナリオの中でも、修正工数やリスクの低減効果が高いものを優先する。
同程度のドキュメントが複数あるなら、「漏れ」、「曖昧さ」、「誤り」の順に優先するとよい。
誤りより、漏れの方が検出するためにより集中する必要があるからです。

#### シナリオの確認と参照情報の整理
レビューするドキュメントが参照しているドキュメントを予め入手しておく必要があります。
参照先のドキュメントがメンテされていない可能性もあるので、
リーダーに役割分担を申し出るなど、自分の担当範囲を超えていないかを確認します。

#### 検出方法と箇所の検討
問題の検出方法を具体的に決めておきます。
例えば、「レビュー対象のドキュメントと、参照ドキュメントを比較して差分があれば検出」とか、
「追加があるなら削除もあるよねみたいなペアがない場合検出」といった具合です。
ここでも「「漏れ」、「曖昧さ」、「誤り」を評価の指針にしましょう。
確認するポイントを絞り込むことで、ドキュメントの後半まで集中力が継続し、レビュー品質の低下を防ぎます。

#### 実施タイミングの決定
確認する内容によって、ある程度時間をとって一気にやるべきなのか、スキマ時間で行うべきかを検討します。
前者はトランザクション範囲内かどうかを確認する場合など、後者はエラーコードが定義通りか確認する時などです。
レビュー時間も見積もって、モチベを下げないよう早め早めに着手するようにしましょう。

## 問題検出の手順
レビューアは以下4つのプロセスを実行します。
「シナリオに沿ったチェック」、「検出した問題のメモ取り」、「シナリオごとの振り返り」、「問題記録票の作成」

### シナリオに沿ったチェック
ドキュメントを読む時は、先んじて選択したシナリオにのみ沿ってドキュメントを読み進めます。
誤字脱字が気になるかもしれませんが、シナリオで定義した問題の検出の方が優先度が高いです。
シナリオは1つずつ選択するようにしましょう。まとめてやったらあかんです。
問題かどうか判断がつかない箇所は、無理やり判断せず、「何故判断がつかないのか」をメモしておきましょう。
あとでレビュー会議で質問するといいと思います。
シナリオ1本目は時間計測もお忘れなく、作業時間見積もりの大事なファクターになります。

### 検出した問題のメモ取り
問題を検出したらメモを取りましょう。ここでは詳細な記録は不要です。メモ程度にとどめて、作業に戻りましょう。
詳細な記録に時間をかけて、問題検出の質を落とす（関連課題の検出が漏れたり）のを防ぎます。
詳細な記録は、一通りの問題検出が終わった後に行いましょう。
後でやった方が、分類とか分けやすいっす。
分類わけながら、共通の問題が他にもないか横展開しましょう。

### シナリオごとの振り返り
チェックが終わったら、シナリオについて想定通りにチェックできたかを振り返ってみましょう。
どのような手順でチェックしたかを記録しておくとよいです。
検出率などを全体でまとめた時に、良ければ同様のレビューは手本になりますし、悪ければ反省点を考える材料になります。
気を付けてほしいのは全ての問題を100%検出することは、現実的には難しいことを知っておきましょう。
100%を目標にするのはいいことだと思いますが。スローガン程度にして、無理に時間かけすぎないようにしましょう。
また、1件も問題が見つからない場合、シナリオを達成する前提知識が自分に備わっているか　ということも考えてみましょう。
1人での解決が難しそうなら、早めにリーダーやメンバーに協力要請を。

### 問題記録票の作成
問題を分類したら、ドキュメント作成者や、他のレビューアが確認しやすいよう、記録票を作成しましょう。
記録票の内容は、「問題種別」、「該当箇所」、「問題内容」です。
ページ番号、行数とか書いておくと紐づけやすいですね。

# 第3章 レビュー会議の進め方
いかにレビュー会議を円滑に進めるか。
## 問題指摘の手順(前半)
大前提として、レビュー会議は複数人で行います。5人で1時間会議したら5時間の作業時間がかかっているということです。
無駄なものししてはいけないというマインドを持って進めましょう。
レビュー会議の最大の目的は、重大な問題を漏れなく検出することです。
副次的な効果として、レビューアーと設計者がシステムと対象ドキュメントに対する知識をどの程度有しているか知る機会になります。

レビュー会議を教育の機会にするのは避けた方がよいです。
本来の目的を達成できなければ、元も子もないからです。
教育の目的も追加したければ、別で打ち合わせを開きましょう。

### リーダーの問題指摘
リーダーが行うべきことは、
まず、「指摘される問題の想定」「会議の計画策定」を行います。
レビューアーの問題検出が終わったら「問題記録表の収集と確認」をします。もちろん会議スペースの確保もお忘れなく。

#### 指摘される問題の想定
リーダーとしては事前の問題検出は必要ないですが、
「レビュー完了と判断できる最低限検出しなければならない問題はなにか」を想定しておく必要があります。

#### 会議の計画策定
ドキュメント数や問題数などから、会議の所要時間を見積もります。
レビューの時間は集中力を保つため、最長でも1回2時間とし、
遅い時間帯の開始も避けるべきです。
レビューの記録係も決めときましょう。

#### 問題記録票の収集と確認
各レビューアが作成した問題記録票を集めます。
集めるってことが大事で、レビューアに適度な緊張感が生まれます。
といってもレビューアも他の仕事しながらですから、十分にレビューできてないとかあると思います。
収集した問題記録票を確認して、必要であればレビュー会議の30分くらいを問題検出の時間に使うなどしましょう。

#### その他
必要があれば、会議室の席配置とか考えてもいいかもです。
また、会議の冒頭で一言「品質上げていきましょー」みたいなこと言うといい会議になります。きっと。

### レビューアの問題指摘(前半)
レビューアがレビュー会議に参加する前に行うべきことは
「検出した問題の優先順位付け」「問題の説明内容の確認」です。
追加で、会議の冒頭は5分程度「マインドの再認識」を行いましょう。

#### 検出した問題の優先順位付け
これだけは指摘しなくてはならないような問題を選んでおきます。
選ぶのは重要度が高いものや、工数低減の大きい問題です。

#### 問題の説明内容の確認
優先付けした問題の中で、説明が難しそうなやつの確認をしとくとよいです。
また、文面も確認して、きつい言葉遣いなどになっていないか確認しましょう。

#### マインドの再認識
レビューの目的、自分の役割が何かを再確認しましょう。
円滑にレビューを進めるために何をするべきか意識しつつ進めましょう。
また、問題と思って指摘しても、内容によっては覆ることだってあります。
※指摘が全て正しいか　というのは難しい話なので
その時に「チクショー」と思って重箱の隅をつつくようなことをせず、
自分も全体も納得できるような姿勢で臨みましょう。

### 作成者の問題指摘(前半)
作成者がレビュー会議のために用意することは2つあります。
「関連ドキュメントの用意」「落ち着いてレビューに向かうこと」です。

#### 関連ドキュメントの用意
レビューにあたり対象ドキュメント以外で必要なドキュメント、資料があれば、
予め用意、作成しておきましょう。

#### 落ち着いてレビューに向かうこと
本人に悪意はなくても辛辣な言葉で指摘を受けることもあります。
自身の否定と捉えず、あくまでドキュメントの問題を指摘していると考えるようにしましょう。

## 問題指摘の手順(後半)
限られた時間の中で、レビューのゴールに到達するためにはどうすればよいでしょうか。

### リーダーの問題指摘(後半)
リーダーは、各レビューアが検出した問題の周知と、シナリオに沿った検出ができたかを確認します。
具体的なプロセスは、「指摘された問題の共通理解」「類似の重大な問題の検出」「脱線の軌道修正」
「シナリオ完了の確認」「会議のクロージング」の五つです。

#### 指摘された問題の共通理解
優先度の高いシナリオ担当レビューアがどのように確認して、問題を検出したかを確認します。
できるだけ具体的に説明をしてもらいます。リーダーはレビューアが話しやすいよう進行してあげます。
そうすることで、レビューアの検出方法が不足ないかを参加者全体で確認することができます。

#### 類似の重大な問題の検出
検出された問題に対して、見逃した場合の工数低減の度合いを確認します。
その深刻度を確認しつつ、他のレビューアに類似の問題が存在しそうかを確認してもらいます。
類似の問題探しはあまり時間を取りすぎないように。

#### 脱線の軌道修正
レビューを行っていると、様々な意見が出るため、どうしても脱線をしてしまうことがあります。
リーダーは、議論が脱線したなと感じたら、本題に戻すよう促すようにしましょう。
問題指摘というのは、どうしても辛辣な言葉になってしまう人もいます。
そういった非生産的な言葉やムードを排除するよう努めるのもリーダーの大事な役割です。

#### シナリオ完了の確認
シナリオで検出できる問題を検出しきったと判断できれば、シナリオを完了します。
シナリオ完了したら休憩を軽く入れましょう。集中力回復です。

#### 会議のクロージング
想定以上にレビューが長引いた場合などは、次回に持ち越すようにして会議をクローズしましょう。
残シナリオが優先度の低いものだけなら、メール回覧などで済ませるのも手です。

#### Tips 尊重型と牽制型
和やかなレビューとなる尊重型と、厳しめのレビューになる牽制型があります。
どちらもメリデメありますが、TPOを材料にバランスをとるようにするといいかもです。

### レビューアの問題指摘(後半)
レビューアのプロセスは「問題の検出方法の説明」「問題の指摘」
「問題指摘の終了」「他レビューアーからの指摘の理解」です。

#### 問題の検出方法の説明
問題検出の手順における「シナリオごとの振り返り」で準備した問題の検出内容を具体的に説明します。
手短に話すようにしますが、他のレビューアが話についてきているかは確認しながら進めてください。

#### 問題の指摘
シナリオごとに検出した問題のうち、深刻度の高いものから指摘を行います。
同じ問題が複数のシナリオでも同様に検出された場合は、まとめて話します。
限られた時間の中で指摘を行うわけですから、1人1人が理解できるように準備しておきましょう。
図（シーケンス図とか）を活用すると文章よりわかりやすい場合があるかも。

#### 問題指摘の終了
問題の指摘が終了したら、記録係が記録できたかを確認してください。
整理、表現方法に困っていたらヘルプをしてあげましょう。

#### 他レビューアからの指摘の理解
他のレビューアが指摘をしている最中は、指摘の理解に努めます。
レビューアの確認した内容に漏れがないかを確認してください。
気づいた問題は、指摘が一通り終わってからしましょう。途中で割り込むと効率悪いです。
指摘漏れや、参考にできる方法は忘れないようにメモしておきましょう。

### 作成者の問題指摘(後半)
作成者の心構えは、「指摘された問題の理解と感謝」「レビューが終わってからすぐドキュメントを修正する」です。

#### 指摘された問題の理解と感謝
指摘を受けたら、どういう問題があるかを理解するようにしましょう。
わからないまま聞き流すようなことは避けてください。誰も得しません。
レビューアも自分の作業の合間に問題検出をしてくれています。
問題を検出してもらえたことに感謝をしましょう。

#### レビューが終わってからドキュメントを修正する。
ドキュメントを直している間、他の参加者は待たなくてはなりません。
問題検出が主目的であることを忘れず、終わってから修正を行うようにしましょう。
レビュー後はできるだけ早めに修正作業に取り掛かりましょう。指摘の内容を忘れないようにです。

## 問題の修正・フォロー
問題指摘をしたのに修正しないまま後続工程に進んで結果回避できた不具合を回避せず工数だけ膨らむなんて話もあります。
「問題の修正・フォロー」と、「問題の再発防止」の観点から確認します。

### 問題の修正・フォロー
問題の修正・フォローは「問題理解と順序決め」「修正とセルフチェック」
「レビューアによる確認」「リーダーによる最終確認」のプロセスがあります。

#### 問題理解と順序決め
作成者が実施します。
レビューが終わったら、問題一覧を見直し、不明点がないかを確認しましょう。
具体的なイメージを持たないまま修正に進んでは二度手間にもなる可能性がありますし、
別々で検出された問題を合わせたときに、別の問題に気づくこともあるかもしれません。
具体的なイメージが持てたら、効率的に修正をするためにどのような順序で修正するかを決めましょう。

#### 修正とセルフチェック
作成者が実施します。
実際にドキュメントを修正します。
実際に作業を行うことで発生する疑問などもあるので、修正は早めに行いましょう。
修正を終えたらセルフチェックを行いましょう。
チェック結果が問題なければ、レビューアに確認依頼を出しましょう。

#### レビューアによる確認
レビューアが実施します。
ドキュメントが指摘通りに修正されているかを確認します。
自分が作業した場合のイメージを持っておくと、実際の成果物と比べることができ、正しく評価しやすいです。
確認結果が問題なければ、リーダーに報告します。

#### リーダーによる最終確認
リーダーが実施します。
リーダーは指摘が修正されているか確認するのですが、さすがに全て見ている余裕があることはほぼないと思います。
漏れがあった場合に工数の上振れが大きいものを見るようにしましょう。
最後に、レビュー報告書を作成します。
ドキュメント規模、レビュー指摘数、レビュー時間当たりの問題検出数などです。

### 問題の再発防止
問題の発生原因と再発防止策を検討することで、今後のレビュー、実装、テストに実績を生かすことができます。
プロセスは「問題の再確認と分類」「問題の発生原因の分析」「再発防止策の検討」です。
リーダーが、レビュー会議に参加した人全員を招集して会議を開きます。

#### 問題の再確認と分類
レビュー会議の問題一覧と修正前・修正後のドキュメントを準備して開始します。
問題のグルーピングを行います。ウォークスルーとテクニカルレビューも分けて分類していきましょう。
誤字脱字みたいな軽微な奴は対象外です。

#### 問題の発生原因の分析
グルーピングを終えたら、グループごとの発生原因を考えます。
どのような着眼点でも構わないので、意見を出すようにしましょう。
ただ、「やる気がないから」みたいな再発防止策に繋がらないような意見はナシで。

#### 再発防止策の検討
発生原因が特定できた問題について、再発防止策を検討します。
意見を募り、設計～テストで同様の問題が発生しないようにするにはどうしたらよいかを意見していきましょう。



# おわりに

以上です。お疲れ様でしたー。
   
# 書籍
[なぜ重大な問題を見逃すのか？間違いだらけの設計レビュー](https://www.amazon.co.jp/dp/B01683BFJM/)